{% extends "admin/layout.html" %}

{% block title %}Dashboard{% endblock %}
{% block dashboard_active %}active{% endblock %}
{% block header_title %}Dashboard{% endblock %}

{% block content %}
<div class="dashboard-cards">
    <div class="card card-users">
        <div class="card-title">Users</div>
        <div class="card-value">{{ stats.users_count }}</div>
    </div>
    <div class="card card-courses">
        <div class="card-title">Courses</div>
        <div class="card-value">{{ stats.courses_count }}</div>
    </div>
    <div class="card card-lessons">
        <div class="card-title">Lessons</div>
        <div class="card-value">{{ stats.lessons_count }}</div>
    </div>
    <div class="card card-enrollments">
        <div class="card-title">Enrollments</div>
        <div class="card-value">{{ stats.enrollments_count }}</div>
    </div>
</div>

<div class="table-container">
    <div class="table-header">
        <div class="table-title">Последние пользователи</div>
    </div>
    <table class="table">
        <thead>
            <tr>
                <th>ID</th>
                <th>Имя</th>
                <th>Email</th>
                <th>Статус</th>
                <th>Действия</th>
            </tr>
        </thead>
        <tbody>
            {% for user in recent_users %}
            <tr>
                <td>{{ user.id }}</td>
                <td>{{ user.full_name }}</td>
                <td>{{ user.email }}</td>
                <td>{{ "Активен" if user.is_active else "Не активен" }}</td>
                <td class="table-actions">
                    <button class="btn btn-sm btn-edit">Редактировать</button>
                    <button class="btn btn-sm btn-delete">Удалить</button>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<div class="table-container">
    <div class="table-header">
        <div class="table-title">Популярные курсы</div>
    </div>
    <table class="table">
        <thead>
            <tr>
                <th>ID</th>
                <th>Название</th>
                <th>Автор</th>
                <th>Количество студентов</th>
                <th>Рейтинг</th>
            </tr>
        </thead>
        <tbody>
            {% for course in popular_courses %}
            <tr>
                <td>{{ course.id }}</td>
                <td>{{ course.title }}</td>
                <td>{{ course.author.full_name }}</td>
                <td>{{ course.students_count }}</td>
                <td>{{ course.average_rating }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}
